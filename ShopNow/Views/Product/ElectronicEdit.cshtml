@model ShopNow.ViewModels.ElectronicCreateEditViewModel
@{
    ViewBag.Title = "Electronic Update";
}
<title>ShopNow | @ViewBag.Title</title>
<div class="container-fluid">
    <div class="row my-2">
        <div class="col-md-6">
            <h5 class="text-success" style="letter-spacing:1px">@ViewBag.Title</h5>
        </div>
        <div class="col-md-6 text-right">
            <a href="~/Product/ElectronicList" target="_self" class="mr-3"><span class="fa fa-list-ul"></span> Electronic List</a>
            <a href="~/Product/List" target="_self"><span class="fa fa-list-ul"></span> Full List</a>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12 mx-auto">
            @using (Html.BeginForm("ElectronicEdit", "Product", FormMethod.Post, new { id = "ElectronicUpdateForm", enctype = "multipart/form-data", autocomplete = "off" }))
            {
                @Html.AntiForgeryToken()
                <div class="card shadow">
                    <div class="card-body">
                        <div class="form-group row">
                            <div class="col-md-2"></div>
                            <div class="col-md-2">
                                <label class="col-form-label"><strong class="text-secondary">Shop Name</strong></label>
                            </div>
                            <div class="col-md-4 text-center">
                                <div class="form-group">
                                    @if (Model.ShopId != 0)
                                    {
                                        <input type="text" class="form-control" name="ShopName" value="@Model.ShopName" readonly />
                                        <input type="hidden" name="ShopId" value="@Model.ShopId" />
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card shadow">
                    <div class="card-body">
                        <div class="form-group row">
                            <div class="col-md-12">
                                <div class="form-group row">
                                    <div class="col-md-3">
                                        <label class="col-form-label"><strong class="text-secondary">Electronic Name</strong></label>
                                        <input type="text" class="form-control" name="MasterProductName" id="MasterProductName" value="@Model.MasterProductName" readonly />
                                        <input type="hidden" name="MasterProductId" id="MasterProductId" value="@Model.MasterProductId" />
                                        <input type="hidden" name="Id" value="@Model.Id" />
                                        <input type="hidden" name="Name" value="@Model.Name" />
                                    </div>
                                    <div class="col-md-3">
                                        <label class="col-form-label"><strong class="text-secondary">Brand Name</strong></label>
                                        <input type="text" class="form-control" name="BrandName" id="BrandName" value="@Model.BrandName" readonly />
                                        <input type="hidden" name="BrandId" id="BrandId" value="@Model.BrandId" />
                                    </div>
                                    <div class="col-md-3">
                                        <label class="col-form-label"><strong class="text-secondary">Category Name</strong></label>
                                        <select class="form-control" id="CategoryId" name="CategoryId">
                                            <option value="@Model.CategoryId">@Model.CategoryName</option>
                                        </select>
                                        <input type="hidden" name="CategoryName" id="CategoryName" value="@Model.CategoryName" />
                                    </div>
                                    <div class="col-md-3">
                                        <label class="col-form-label" for="GoogleTaxonomyCode"><strong class="text-secondary">Google Taxonomy Code</strong></label>
                                        <input id="GoogleTaxonomyCode" type="text" class="form-control" name="GoogleTaxonomyCode" value="@Model.GoogleTaxonomyCode" readonly />
                                    </div>
                                    <div class="col-md-3">
                                        <label class="col-form-label" for="Price"><strong class="text-secondary">Menu Price</strong></label>
                                        <input id="MenuPrice" type="number" class="form-control" name="MenuPrice" min="0" step="any" value="@Model.MenuPrice" />
                                    </div>
                                    <div class="col-md-3">
                                        <label class="col-form-label" for="Price"><strong class="text-secondary">Selling Price</strong></label>
                                        <input id="Price" type="number" class="form-control" name="Price" step="any" value="@Model.Price" />
                                    </div>
                                    <div class="col-md-3">
                                        <label class="col-form-label" for="Qty"><strong class="text-secondary">Quantity</strong></label>
                                        <input id="Qty" type="number" class="form-control" name="Qty" min="0" value="@Model.Qty" />
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label class="control-label" for="Percentage"><strong class="text-secondary">Percentage</strong></label>
                                            <input id="Percentage" type="number" class="form-control" name="Percentage" value="@Model.Percentage" />
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <label class="control-label" for="PackingType"><strong class="text-secondary">Packing Type</strong></label>
                                        <div class="form-check-inline ml-3">
                                            <label class="form-check-label">
                                                <input type="radio" class="form-check-input" name="PackingType" value="0" @if (Model.PackingType == 0) { <text> checked </text> }>Item Qty
                                            </label>
                                        </div>
                                        <div class="form-check-inline">
                                            <label class="form-check-label">
                                                <input type="radio" class="form-check-input" name="PackingType" value="1" @if (Model.PackingType == 1) { <text> checked </text> }>SKU
                                            </label>
                                        </div>
                                        <input type="number" class="form-control" name="PackingCharge" id="PackingCharge" value="@Model.PackingCharge" />
                                    </div>
                                    <div class="col-md-3 d-flex mt-4">
                                        <div class="mx-3 mt-3">
                                            <input type="checkbox" id="IsPreorder" name="IsPreorder" value="true" @if (Model.IsPreorder) { <text> checked </text> }>
                                            <label class="font-weight-bold text-secondary control-label" for="IsPreorder"> Is PreOrder</label><br>
                                        </div>
                                        <div class="ml-3 mt-2">
                                            <select name="PreorderHour" id="PreorderHour" class="form-control d-none">
                                                <option value="0" selected disabled>Select Hours</option>
                                                @for (int i = 2; i <= 24; i++)
                                                {
                                                    <option value="@i" @if (Model.PreorderHour == @i) { <text> selected </text> }>@i hours</option>
                                                }
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="row">
                                    <div class="col-md-12  form-group">
                                        <label class="col-form-label" for="ShortDescription"><strong class="text-secondary">Short Description</strong></label>
                                        <input id="ShortDescription" type="text" class="form-control" name="ShortDescription" min="0" value="@Model.ShortDescription" readonly />
                                    </div>
                                    <div class="col-md-12 form-group">
                                        <label class="control-label"><strong class="text-secondary">Long Description</strong></label>
                                        <div class="form-control" id="LongDescription">@Html.Raw(Model.LongDescription)</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="row">
                                    <div class="col-md-4 form-group">
                                        <label class="control-label text-secondary font-weight-bold ml-2">Electronic Image-1</label>
                                        <img id="img-LargeImage1" src="https://s3.ap-south-1.amazonaws.com/shopnowchat.com/Medium/@Model.ImagePath1" onerror="this.src='/Images/noimage.png'" style="width:120px;height:120px;" />
                                        <input type="hidden" name="ImagePath1" value="@Model.ImagePath1" />
                                    </div>
                                    <div class="col-md-4 form-group">
                                        <label class="control-label text-secondary font-weight-bold ml-2">Electronic Image-2</label>
                                        <img id="img-LargeImage2" src="https://s3.ap-south-1.amazonaws.com/shopnowchat.com/Medium/@Model.ImagePath2" onerror="this.src='/Images/noimage.png'" style="width:120px;height:120px;" />
                                        <input type="hidden" name="ImagePath2" value="@Model.ImagePath2" />
                                    </div>
                                    <div class="col-md-4 form-group">
                                        <label class="control-label text-secondary font-weight-bold ml-2">Electronic Image-3</label>
                                        <img id="img-LargeImage3" src="https://s3.ap-south-1.amazonaws.com/shopnowchat.com/Medium/@Model.ImagePath3" onerror="this.src='/Images/noimage.png'" style="width:120px;height:120px;" />
                                        <input type="hidden" name="ImagePath3" value="@Model.ImagePath3" />
                                    </div>
                                    <div class="col-md-4 form-group">
                                        <label class="control-label text-secondary font-weight-bold ml-2">Electronic Image-4</label>
                                        <img id="img-LargeImage4" src="https://s3.ap-south-1.amazonaws.com/shopnowchat.com/Medium/@Model.ImagePath4" onerror="this.src='/Images/noimage.png'" style="width:120px;height:120px;" />
                                        <input type="hidden" name="ImagePath4" value="@Model.ImagePath4" />
                                    </div>
                                    <div class="col-md-4 form-group">
                                        <label class="control-label text-secondary font-weight-bold ml-2">Electronic Image-5</label>
                                        <img id="img-LargeImage5" src="https://s3.ap-south-1.amazonaws.com/shopnowchat.com/Medium/@Model.ImagePath5" onerror="this.src='/Images/noimage.png'" style="width:120px;height:120px;" />
                                        <input type="hidden" name="ImagePath5" value="@Model.ImagePath5" />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-md-2 mx-auto">
                                <button type="submit" class="btn btn-block btn-success Save" id="Update"><span class="glyphicon glyphicon-file"></span> Save</button>
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</div>

@section Scripts
{
    <!--Select2-->
    <script src="~/Scripts/select2/js/select2.js"></script>
    <link href="~/Scripts/select2/css/select2.css" rel="stylesheet" />
    <link href="~/Content/select2/select2.custom.css" rel="stylesheet" />
    <!--Select2 End-->
    <script src="~/Scripts/multiple-image-upload.js"></script>
    <link href="~/Content/multiple-image-upload.css" rel="stylesheet" />
    <script>
        $(document).ready(function () {
            $('#Price').on('change keyup', function () {
                var menuprice = $("#MenuPrice").val();
                var sellingprice = $(this).val();
                var results = Math.ceil(((menuprice - sellingprice) / menuprice) * 100);
                $("#Percentage").val(results);
            });

            $('#MenuPrice').on('change keyup', function () {
                var menuprice = $(this).val();
                var sellingprice = $('#Price').val();
                var results = Math.ceil(((menuprice - sellingprice) / menuprice) * 100);
                $("#Percentage").val(results);
            });

            $('#Percentage').on('change keyup', function () {
                var percentage = $(this).val();
                var menuprice = $("#MenuPrice").val();
                var results = Math.ceil(menuprice - (menuprice * (percentage / 100)));
                $("#Price").val(results);
            });

            showHour();

            $('#IsPreorder').change(function () {
                showHour();
            });

            $('#CategoryId').select2({
                placeholder: "Search Category",
                ajax: {
                    url: "/Product/GetCategorySelect2",
                    width: '100%',
                    delay: 250,
                    dataType: 'json'
                }
            }).on('select2:select', function (e) {
                $('input[name="CategoryName"]').val(e.params.data.text);
            });

        });

         function showHour() {
            if ($('#IsPreorder').is(":checked")) {
                $("#PreorderHour").removeClass('d-none');
                $("#PreorderHour").val(@Model.PreorderHour);
            } else {
                $("#PreorderHour").addClass('d-none');
                $("#PreorderHour").val(0);
            }
        }
    </script>
}
