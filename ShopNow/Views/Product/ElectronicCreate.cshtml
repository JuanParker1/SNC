@model ShopNow.ViewModels.ElectronicCreateEditViewModel
@{
    ViewBag.Title = "Electronic Entry";
}
<title>ShopNow | @ViewBag.Title</title>
<div class="container-fluid">
    <div class="row my-2">
        <div class="col-md-6">
            <h5 class="text-success" style="letter-spacing:1px">@ViewBag.Title</h5>
        </div>
        <div class="col-md-6 text-right">
            <a href="~/Product/ElectronicList" target="_self" class="mr-3"><span class="fa fa-list-ul"></span> Electronic List</a>
            <a href="~/Product/List" target="_self"><span class="fa fa-list-ul"></span> Full List</a>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12 mx-auto">
            @using (Html.BeginForm("ElectronicCreate", "Product", FormMethod.Post, new { id = "ElectronicCreateForm", enctype = "multipart/form-data" }))
            {
                @Html.AntiForgeryToken()
                <div class="card shadow mb-3">
                    <div class="card-body">
                        <div class="col-md-12">
                            <div class="form-group row">
                                <div class="col-md-2"></div>
                                <div class="col-md-2 text-md-left">
                                    <label class="col-form-label text-secondary font-weight-bold">Shop Name</label>
                                </div>
                                <div class="col-md-4">
                                    <select id="ShopId" name="ShopId" class="form-control"></select>
                                    <input type="hidden" name="ShopName" id="ShopName" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card shadow">
                    <div class="card-body">
                        <div class="form-group row">
                            <div class="col-md-12">
                                <div class="form-group row">
                                    <div class="col-md-3">
                                        <label class="col-form-label"><strong class="text-secondary">Electronic Name</strong></label>
                                        <select name="MasterProductId" id="MasterProductId" class="form-control"></select>
                                        <input type="hidden" name="MasterProductName" id="MasterProductName" />
                                        @*<input type="hidden" name="MasterProductId" id="MasterProductId" />*@
                                        <input type="hidden" name="Name" id="Name" />
                                    </div>
                                    <div class="col-md-3">
                                        <label class="col-form-label"><strong class="text-secondary">Brand Name</strong></label>
                                        <input type="text" class="form-control" name="BrandName" id="BrandName" readonly />
                                        <input type="hidden" name="BrandId" id="BrandId" />
                                    </div>
                                    <div class="col-md-3">
                                        <label class="col-form-label"><strong class="text-secondary">Category Name</strong></label>
                                        <select id="CategoryId" name="CategoryId" class="form-control"></select>
                                        <input type="hidden" name="CategoryName" id="CategoryName" />
                                    </div>
                                    <div class="col-md-3">
                                        <label class="col-form-label" for="GoogleTaxonomyCode"><strong class="text-secondary">Google Taxonomy Code</strong></label>
                                        <input id="GoogleTaxonomyCode" type="text" class="form-control" name="GoogleTaxonomyCode" readonly />
                                    </div>
                                    <div class="col-md-3">
                                        <label class="col-form-label" for="Price"><strong class="text-secondary">Menu Price</strong></label>
                                        <input id="MenuPrice" type="number" class="form-control" name="MenuPrice" step="any" min="0" />
                                    </div>
                                    <div class="col-md-3">
                                        <label class="col-form-label" for="Price"><strong class="text-secondary">Selling Price</strong></label>
                                        <input id="Price" type="number" class="form-control" name="Price" step="any" min="0" />
                                    </div>
                                    <div class="col-md-3">
                                        <label class="col-form-label" for="Qty"><strong class="text-secondary">Quantity</strong></label>
                                        <input id="Qty" type="number" class="form-control" name="Qty" min="0" />
                                    </div>
                                    <div class="col-md-3">
                                        <label class="col-form-label" for="Percentage"><strong class="text-secondary">Percentage</strong></label>
                                        <input id="Percentage" type="number" class="form-control" name="Percentage" readonly />
                                    </div>
                                    <div class="col-md-3">
                                        <label class="col-form-label" for="PackingType"><strong class="text-secondary">Packing Type</strong></label>
                                        <div class="form-check-inline ml-3">
                                            <label class="form-check-label">
                                                <input type="radio" class="form-check-input" name="PackingType" value="0" checked>Item Qty
                                            </label>
                                        </div>
                                        <div class="form-check-inline">
                                            <label class="form-check-label">
                                                <input type="radio" class="form-check-input" name="PackingType" value="1">SKU
                                            </label>
                                        </div>
                                        <input type="number" class="form-control" name="PackingCharge" id="PackingCharge" />
                                    </div>
                                    <div class="col-md-3 d-flex mt-4 form-group">
                                        <div class="mt-2">
                                            <input type="checkbox" id="IsPreorder" name="IsPreorder" value="true">
                                            <label class="font-weight-bold text-secondary col-form-label col-form-label" for="IsPreorder"> Is PreOrder</label><br>
                                        </div>
                                        <div class="ml-3 mt-2">
                                            <select name="PreorderHour" id="PreorderHour" class="form-control d-none">
                                                <option value="0" selected disabled>Select Hours</option>
                                                @for (int i = 2; i <= 24; i++)
                                                {
                                                    <option value="@i">@i hours</option>
                                                }
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="row">
                                    <div class="col-md-12  form-group">
                                        <label class="col-form-label" for="ShortDescription"><strong class="text-secondary">Short Description</strong></label>
                                        <input id="ShortDescription" type="text" class="form-control" name="ShortDescription" min="0" readonly />
                                    </div>
                                    <div class="col-md-12 form-group">
                                        <label class="col-form-label"><strong class="text-secondary">Long Description</strong></label>
                                        <div id="LongDescription"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="row">
                                    <div class="col-md-4 form-group">
                                        <label class="col-form-label text-secondary font-weight-bold">Electronic Image1</label>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <img class="img-container" id="img-ElectronicLargeImage1" src="/Images/No Photo.png" onerror="this.src='/Images/noimage.png'" style="width:120px;height:120px;" />
                                                <input type="hidden" name="ImagePath1" />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4 form-group">
                                        <label class="col-form-label text-secondary font-weight-bold">Electronic Image2</label>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <img class="img-container" id="img-ElectronicLargeImage2" src="/Images/No Photo.png" onerror="this.src='/Images/noimage.png'" style="width:120px;height:120px;" />
                                                <input type="hidden" name="ImagePath2" />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4 form-group">
                                        <label class="col-form-label text-secondary font-weight-bold">Electronic Image3</label>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <img class="img-container" id="img-ElectronicLargeImage3" src="/Images/No Photo.png" onerror="this.src='/Images/noimage.png'" style="width:120px;height:120px;" />
                                                <input type="hidden" name="ImagePath3" />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4 form-group">
                                        <label class="col-form-label text-secondary font-weight-bold">Electronic Image4</label>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <img class="img-container" id="img-ElectronicLargeImage4" src="/Images/No Photo.png" onerror="this.src='/Images/noimage.png'" style="width:120px;height:120px;" />
                                                <input type="hidden" name="ImagePath4" />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4 form-group">
                                        <label class="col-form-label text-secondary font-weight-bold">Electronic Image5</label>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <img class="img-container" id="img-ElectronicLargeImage5" src="/Images/No Photo.png" onerror="this.src='/Images/noimage.png'" style="width:120px;height:120px;" />
                                                <input type="hidden" name="ImagePath5" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-md-2 mx-auto">
                                <button type="button" class="btn btn-block btn-success Save" id="Create"><span class="glyphicon glyphicon-file"></span> Save</button>
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</div>

@section Scripts
{
    <!--Select2-->
    <script src="~/Scripts/select2/js/select2.js"></script>
    <link href="~/Scripts/select2/css/select2.css" rel="stylesheet" />
    <link href="~/Content/select2/select2.custom.css" rel="stylesheet" />
    <!--Select2 End-->
    <script src="~/Scripts/ValidateRequiredFields.js"></script>
    <script src="~/Scripts/multiple-image-upload.js"></script>
    <link href="~/Content/multiple-image-upload.css" rel="stylesheet" />
    <script src="~/Scripts/sweetalert/sweetalert.min.js"></script>
    <link href="~/Content/sweetalert/sweetalert.css" rel="stylesheet" />

    <script>
        $(document).ready(function () {
            var errormsg = "@ViewBag.ErrorMessage";
            var msg = "@ViewBag.Message";
            if (errormsg != "") {
                swal("Notice!", errormsg, "error")
            }
            if (msg != "") {
                swal("Success!", msg, "success")
            }

            $('#CategoryId').select2({
                placeholder: "Search Category",
                ajax: {
                    url: "/Product/GetCategorySelect2",
                    width: '100%',
                    delay: 250,
                    dataType: 'json'
                }
            }).on('select2:select', function (e) {
                $('input[name="CategoryName"]').val(e.params.data.text);
            });

            $('#IsPreorder').change(function () {
                if (this.checked) {
                    $("#PreorderHour").removeClass('d-none');
                } else {
                    $("#PreorderHour").addClass('d-none');
                    $("#PreorderHour").val(0);
                }
            });

            $('#Price').on('change keyup', function () {
                var menuprice = $("#MenuPrice").val();
                var sellingprice = $(this).val();
                var results = Math.ceil(((menuprice - sellingprice) / menuprice) * 100);
                $("#Percentage").val(results);
            });

            $('#MenuPrice').on('change keyup', function () {
                var menuprice = $(this).val();
                var sellingprice = $('#Price').val();
                var results = Math.ceil(((menuprice - sellingprice) / menuprice) * 100);
                $("#Percentage").val(results);
            });

            $('#ShopId').select2({
                placeholder: "Search Shop",
                ajax: {
                    url: "/Product/GetElectronicShopSelect2",
                    width: '100%',
                    delay: 250,
                    dataType: 'json'
                }
            }).on('select2:select', function (e) {
                $('input[name="ShopName"]').val(e.params.data.textSave);
            });

            $('#MasterProductId').select2({
                placeholder: "Search Product",
                ajax: {
                    url: "/Product/GetElectronicSelect2",
                    width: '100%',
                    delay: 250,
                    dataType: 'json'
                }
            }).on('select2:select', function (e) {
                $('#LongDescription').text("");
                $('select[name="CategoryId"]').find('option').remove();
                $('input[name="MasterProductName"]').val(e.params.data.text);
                $('input[name="MasterProductId"]').val(e.params.data.MasterId);
                $('input[name="Name"]').val(e.params.data.text);
                $('#BrandId').val(e.params.data.BrandId);
                $('#BrandName').val(e.params.data.BrandName);
                $('#ASIN').val(e.params.data.ASIN);
                $('select[name="CategoryId"]').append('<option value=' + e.params.data.CategoryId + '>' + e.params.data.CategoryName + '</option>')
                $('input[name="CategoryName"]').val(e.params.data.CategoryName);
                //$('#CategoryId').val(e.params.data.CategoryId);
                //$('#CategoryName').val(e.params.data.CategoryName);
                $('#GoogleTaxonomyCode').val(e.params.data.GoogleTaxonomyCode);
                $('#img-ElectronicLargeImage1').attr('src', 'https://s3.ap-south-1.amazonaws.com/shopnowchat.com/Medium/' + e.params.data.ImagePath1);
                $('#img-ElectronicLargeImage2').attr('src', 'https://s3.ap-south-1.amazonaws.com/shopnowchat.com/Medium/' + e.params.data.ImagePath2);
                $('#img-ElectronicLargeImage3').attr('src', 'https://s3.ap-south-1.amazonaws.com/shopnowchat.com/Medium/' + e.params.data.ImagePath3);
                $('#img-ElectronicLargeImage4').attr('src', 'https://s3.ap-south-1.amazonaws.com/shopnowchat.com/Medium/' + e.params.data.ImagePath4);
                $('#img-ElectronicLargeImage5').attr('src', 'https://s3.ap-south-1.amazonaws.com/shopnowchat.com/Medium/' + e.params.data.ImagePath5);
                $('input[name="ImagePath1"]').val(e.params.data.ImagePath1);
                $('input[name="ImagePath2"]').val(e.params.data.ImagePath2);
                $('input[name="ImagePath3"]').val(e.params.data.ImagePath3);
                $('input[name="ImagePath4"]').val(e.params.data.ImagePath4);
                $('input[name="ImagePath5"]').val(e.params.data.ImagePath5);
                $('#MenuPrice').val(e.params.data.Price);
                $('#Weight').val(e.params.data.weight);
                $('#SizeLWH').val(e.params.data.SizeLWH);
                $('#ShortDescription').val(e.params.data.ShortDescription);
                $('#LongDescription').append(e.params.data.LongDescription);
                $('input[name="MeasurementUnitId"]').val(e.params.data.MeasurementUnitId);
                $('input[name="MeasurementUnitName"]').val(e.params.data.MeasurementUnitName);
                $('input[name="PackageId"]').val(e.params.data.PackageId);
                $('input[name="PackageName"]').val(e.params.data.PackageName);
            });

            $(".Save").click(function () {
                var isValidated = false;
                var requiredArr = [
                    'ShopId',
                    'MasterProductId',
                    'MenuPrice',
                    'Price'
                ];
                var isValidated = ValidateEmptyRequiredFiels(requiredArr);
                if (isValidated) {
                    $(ElectronicCreateForm).submit();
                }
            });
        });
    </script>
}
