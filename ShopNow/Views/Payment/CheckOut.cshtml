@model ShopNow.ViewModels.PaymentCreditsViewModel
@{
    ViewBag.Title = "SNOWCH";
}
<title>SNOWCH | Pay</title>
@if (ViewBag.ErrorMessage != null)
{
    <div class="alert alert-danger">
        <h3>Error:</h3>
        <p>
            @ViewBag.ErrorMessage
        </p>
    </div>
}
<style>
    .table.table-bordered th {
        border-color: #544225;
        border-top-color: #544225;
    }

    .table.table-bordered tr td {
        border-color: #544225;
        border-top-color: #544225;
    }
</style>
<div class="container my-0">
    <div class="row">
        <div class="col-md-12">
            <div class="FailureCase">
                <div class="row">
                    @*<div class="col-md-1 ml-auto">
                            <img class="adminimg rounded" src="~/Images/ShopNowPayCoin.png" style="width:60px;height:60px" />
                        </div>*@
                    <div class="col-md-4 mt-3">
                        <span class="h4 text-success">Shop Now</span>
                    </div>
                    <div class="col-md-4 text-center">
                        <h4>RECEIPT VOUCHER</h4>
                        <p>(Original for recipient)</p>
                    </div>
                    <div class="col-md-4">
                        <span>Invoice No: <span class="font-weight-bold">@if (Model.ReferenceCode == null)
                        {<span>Free</span>}
                        else {<span>@Model.ReferenceCode</span> }
                        </span></span>
                        <p><span>Invoice Date: <span class="font-weight-bold">@Model.DateEncoded.ToString("dd-MMMM-yyyy")</span></span></p>
                    </div>
                </div>
                <div class="row mt-5">
                    <div class="col-md-8">
                        <div class="row">
                            <div class="col-md-5 line-height-20">
                                <p class="font-weight-bold">Customer Details</p>
                                <p>@Model.ShopName</p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-5 line-height-20">
                                <p>@Model.Address</p>
                            </div>
                        </div>
                        @if (Model.GSTINNumber != null)
                        {
                        <p>GSTIN: @Model.GSTINNumber</p>
                        }
                    </div>
                    <div class="col-md-4">
                        <div class="row">
                            <div class="col-md-12 line-height-20">
                                <p class="font-weight-bold">Supplier Details</p>
                                <p><span class="">Shop Now Chat</span> (Unit of Joyra Traders)</p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12 line-height-20">
                                <p><span>No. 44, Court Road, Nagercoil-629001, Kanyakumari, Tamilnadu, India.</span></p>
                            </div>
                        </div>
                        <p>GSTIN: 33AVIPM7227M2Z8</p>
                    </div>
                </div>
                <table class="table table-bordered mt-2 jenitto">
                    <colgroup span="2"></colgroup>
                    <colgroup span="2"></colgroup>
                    <tr>
                        <th rowspan="2">Sl.No</th>
                        <th rowspan="2">HSN Code</th>
                        <th rowspan="2">Particulars</th>
                        <th rowspan="2">Rate(INR)</th>
                        <th rowspan="2">Quantity</th>
                        <th rowspan="2">Total</th>
                        <th colspan="2" scope="colgroup">State GST</th>
                        <th colspan="2" scope="colgroup">Central GST</th>
                        <th colspan="2" scope="colgroup">Integrated GST</th>
                    </tr>
                    <tr>
                        <th scope="col">Rate</th>
                        <th scope="col">Amount</th>
                        <th scope="col">Rate</th>
                        <th scope="col">Amount</th>
                        <th scope="col">Rate</th>
                        <th scope="col">Amount</th>
                    </tr>
                    <tr>
                        <td>1.</td>
                        <td>85238020</td>
                        <td>Shop Now Credits</td>
                        <td class="text-right">1.00</td>
                        <td class="text-right">@Model.OriginalAmount</td>
                        <td class="text-right">@Model.OriginalAmount</td>
                        <td class="text-right"><span class="SGSTRate"></span></td>
                        <td class="text-right"><span class="SGSTAmount"></span></td>
                        <td class="text-right"><span class="CGSTRate"></span></td>
                        <td class="text-right"><span class="CGSTAmount"></span></td>
                        <td class="text-right"><span class="IGSTRate"></span></td>
                        <td class="text-right"><span class="IGSTAmount"></span></td>
                    </tr>
                    <tr>
                        <td colspan="5" class="text-right">Total</td>
                        <td class="text-right">@Model.OriginalAmount</td>
                        <td colspan="2" class="text-right"><span class="SGSTAmount"></span></td>
                        <td colspan="2" class="text-right"><span class="CGSTAmount"></span></td>
                        <td colspan="2" class="text-right"><span class="IGSTAmount"></span></td>
                    </tr>
                    <tr>
                        <td colspan="5" class="text-right">Total Amount</td>
                        <td colspan="7" class="text-right"><span class="font-weight-bold"><span class="fa fa-rupee"></span> @Model.Amount</span></td>
                    </tr>
                </table>
                <table class="table table-bordered">
                    <tr>
                        <th class="text-center">Particulars</th>
                        <th class="text-center">Amount (INR)</th>
                    </tr>
                    <tr>
                        <td>Gross amount</td>
                        <td class="text-right"><span class="font-weight-bold"><span class="fa fa-rupee"></span> @Model.Amount</span></td>
                    </tr>
                    <tr>
                        <td>Total amount received</td>
                        <td class="text-right"><span class="font-weight-bold"><span class="fa fa-rupee"></span> @Model.Amount</span></td>
                    </tr>
                    <tr>
                        <td>Total amount in words</td>
                        <td class="text-right"><span class="AmountinWords"></span></td>
                    </tr>
                </table>
            </div>
            <div class="row form-group">
                <div class="col-md-3">
                    <input type="hidden" name="Id" id="Id" value="@Model.Id" />
                    <input type="hidden" name="GSTINNumber" id="GSTINNumber" value="@Model.GSTINNumber" />
                    <input type="hidden" name="OriginalAmount" id="OriginalAmount" value="@Model.OriginalAmount" />
                    <input type="hidden" name="Amount" id="Amount" value="@Model.Amount" />
                    <input type="hidden" name="ReferenceCode" value="@Model.ReferenceCode" />
                    <input type="hidden" name="CreditType" id="CreditType" value="@Model.CreditType" />
                    <input type="hidden" name="PaymentMode" id="PaymentMode" />
                    <input type="hidden" name="PaymentResult" id="PaymentResult" />
                </div>
            </div>
            <div class="row form-group d-print-none">
                <div class="col-md-10 text-center Success">
                    <h5 class="text-success">Payment Received Successfully (@Model.ReferenceCode)</h5>
                </div>
            </div>
            <div class="row form-group d-print-none">
                <div class="col-md-10 text-center">
                    <a class="btn btn-sm btn-secondary print mr-2" onclick="window.print()" style="width:60px">Print</a>
                    <a class="btn btn-sm" href="~/Payment/Create" style="width:80px; background-color:#b58330; color:white;">Home</a>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts
{
    <script>
        $(document).ready(function () {
            var credittype = $("#CreditType").val();
            if (credittype == 0) {
                var gstnumber = $("#GSTINNumber").val();
                var originalamount = $("#OriginalAmount").val();
                var res = gstnumber.slice(0, 2);
                if (res == '33') {
                    var stategst = parseInt(originalamount * (9 / 100));
                    $(".SGSTRate").text("9 %");
                    $(".CGSTRate").text("9 %");
                    $(".SGSTAmount").text(stategst);
                    $(".CGSTAmount").text(stategst);
                    $(".IGSTRate").text("0");
                    $(".IGSTAmount").text("0");
                } else {
                    var integratedgst = parseInt(originalamount * (18 / 100));
                    $(".IGSTRate").text("18 %");
                    $(".IGSTAmount").text(integratedgst);
                    $(".SGSTRate").text("0");
                    $(".CGSTRate").text("0");
                    $(".SGSTAmount").text("0");
                    $(".CGSTAmount").text("0");
                }
                var amount = $("#Amount").val();
                $(".AmountinWords").text(convertNumberToWords(amount) + "Rupees Only");
            }
        });

        function convertNumberToWords(amount) {
            var words = new Array();
            words[0] = '';
            words[1] = 'One';
            words[2] = 'Two';
            words[3] = 'Three';
            words[4] = 'Four';
            words[5] = 'Five';
            words[6] = 'Six';
            words[7] = 'Seven';
            words[8] = 'Eight';
            words[9] = 'Nine';
            words[10] = 'Ten';
            words[11] = 'Eleven';
            words[12] = 'Twelve';
            words[13] = 'Thirteen';
            words[14] = 'Fourteen';
            words[15] = 'Fifteen';
            words[16] = 'Sixteen';
            words[17] = 'Seventeen';
            words[18] = 'Eighteen';
            words[19] = 'Nineteen';
            words[20] = 'Twenty';
            words[30] = 'Thirty';
            words[40] = 'Forty';
            words[50] = 'Fifty';
            words[60] = 'Sixty';
            words[70] = 'Seventy';
            words[80] = 'Eighty';
            words[90] = 'Ninety';
            amount = amount.toString();
            var atemp = amount.split(".");
            var number = atemp[0].split(",").join("");
            var n_length = number.length;
            var words_string = "";
            if (n_length <= 9) {
                var n_array = new Array(0, 0, 0, 0, 0, 0, 0, 0, 0);
                var received_n_array = new Array();
                for (var i = 0; i < n_length; i++) {
                    received_n_array[i] = number.substr(i, 1);
                }
                for (var i = 9 - n_length, j = 0; i < 9; i++ , j++) {
                    n_array[i] = received_n_array[j];
                }
                for (var i = 0, j = 1; i < 9; i++ , j++) {
                    if (i == 0 || i == 2 || i == 4 || i == 7) {
                        if (n_array[i] == 1) {
                            n_array[j] = 10 + parseInt(n_array[j]);
                            n_array[i] = 0;
                        }
                    }
                }
                value = "";
                for (var i = 0; i < 9; i++) {
                    if (i == 0 || i == 2 || i == 4 || i == 7) {
                        value = n_array[i] * 10;
                    } else {
                        value = n_array[i];
                    }
                    if (value != 0) {
                        words_string += words[value] + " ";
                    }
                    if ((i == 1 && value != 0) || (i == 0 && value != 0 && n_array[i + 1] == 0)) {
                        words_string += "Crores ";
                    }
                    if ((i == 3 && value != 0) || (i == 2 && value != 0 && n_array[i + 1] == 0)) {
                        words_string += "Lakhs ";
                    }
                    if ((i == 5 && value != 0) || (i == 4 && value != 0 && n_array[i + 1] == 0)) {
                        words_string += "Thousand ";
                    }
                    if (i == 6 && value != 0 && (n_array[i + 1] != 0 && n_array[i + 2] != 0)) {
                        words_string += "Hundred and ";
                    } else if (i == 6 && value != 0) {
                        words_string += "Hundred ";
                    }
                }
                words_string = words_string.split("  ").join(" ");
            }
            return words_string;
        }
    </script>
}


